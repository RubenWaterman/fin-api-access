# FinAPIAccess

&lt;strong&gt;RESTful API for Account Information Services (AIS) and Payment Initiation Services (PIS)&lt;/strong&gt;  The following pages give you some general information on how to use our APIs.&lt;br/&gt; The actual API services documentation then follows further below. You can use the menu to jump between API sections. &lt;br/&gt; &lt;br/&gt; This page has a built-in HTTP(S) client, so you can test the services directly from within this page, by filling in the request parameters and/or body in the respective services, and then hitting the TRY button. Note that you need to be authorized to make a successful API call. To authorize, refer to the &#39;Authorization&#39; section of the API, or just use the OAUTH button that can be found near the TRY button. &lt;br/&gt; &lt;br/&gt; You should also check out the &lt;a href&#x3D;\&quot;https://finapi.zendesk.com/hc/en-us\&quot; target&#x3D;\&quot;_blank\&quot;&gt;Developer Portal&lt;/a&gt; for more information. If you need any help with the API, contact support@finapi.io. &lt;br/&gt;  &lt;h2&gt;General information&lt;/h2&gt;  &lt;h3&gt;&lt;strong&gt;Error Responses&lt;/strong&gt;&lt;/h3&gt; When an API call returns with an error, then in general it has the structure shown in the following example:  &lt;pre&gt; {   \&quot;errors\&quot;: [     {       \&quot;message\&quot;: \&quot;Interface &#39;FINTS_SERVER&#39; is not supported for this operation.\&quot;,       \&quot;code\&quot;: \&quot;BAD_REQUEST\&quot;,       \&quot;type\&quot;: \&quot;TECHNICAL\&quot;     }   ],   \&quot;date\&quot;: \&quot;2020-11-19 16:54:06.854\&quot;,   \&quot;requestId\&quot;: \&quot;selfgen-312042e7-df55-47e4-bffd-956a68ef37b5\&quot;,   \&quot;endpoint\&quot;: \&quot;POST /api/v1/bankConnections/import\&quot;,   \&quot;authContext\&quot;: \&quot;1/21\&quot;,   \&quot;bank\&quot;: \&quot;DEMO0002 - finAPI Test Redirect Bank\&quot; } &lt;/pre&gt;  If an API call requires an additional authentication by the user, HTTP code 510 is returned and the error response contains the additional \&quot;multiStepAuthentication\&quot; object, see the following example:  &lt;pre&gt; {   \&quot;errors\&quot;: [     {       \&quot;message\&quot;: \&quot;Es ist eine zusätzliche Authentifizierung erforderlich. Bitte geben Sie folgenden Code an: 123456\&quot;,       \&quot;code\&quot;: \&quot;ADDITIONAL_AUTHENTICATION_REQUIRED\&quot;,       \&quot;type\&quot;: \&quot;BUSINESS\&quot;,       \&quot;multiStepAuthentication\&quot;: {         \&quot;hash\&quot;: \&quot;678b13f4be9ed7d981a840af8131223a\&quot;,         \&quot;status\&quot;: \&quot;CHALLENGE_RESPONSE_REQUIRED\&quot;,         \&quot;challengeMessage\&quot;: \&quot;Es ist eine zusätzliche Authentifizierung erforderlich. Bitte geben Sie folgenden Code an: 123456\&quot;,         \&quot;answerFieldLabel\&quot;: \&quot;TAN\&quot;,         \&quot;redirectUrl\&quot;: null,         \&quot;redirectContext\&quot;: null,         \&quot;redirectContextField\&quot;: null,         \&quot;twoStepProcedures\&quot;: null,         \&quot;photoTanMimeType\&quot;: null,         \&quot;photoTanData\&quot;: null,         \&quot;opticalData\&quot;: null       }     }   ],   \&quot;date\&quot;: \&quot;2019-11-29 09:51:55.931\&quot;,   \&quot;requestId\&quot;: \&quot;selfgen-45059c99-1b14-4df7-9bd3-9d5f126df294\&quot;,   \&quot;endpoint\&quot;: \&quot;POST /api/v1/bankConnections/import\&quot;,   \&quot;authContext\&quot;: \&quot;1/18\&quot;,   \&quot;bank\&quot;: \&quot;DEMO0001 - finAPI Test Bank\&quot; } &lt;/pre&gt;  An exception to this error format are API authentication errors, where the following structure is returned:  &lt;pre&gt; {   \&quot;error\&quot;: \&quot;invalid_token\&quot;,   \&quot;error_description\&quot;: \&quot;Invalid access token: cccbce46-xxxx-xxxx-xxxx-xxxxxxxxxx\&quot; } &lt;/pre&gt;  &lt;h3&gt;&lt;strong&gt;Paging&lt;/strong&gt;&lt;/h3&gt; API services that may potentially return a lot of data implement paging. They return a limited number of entries within a \&quot;page\&quot;. Further entries must be fetched with subsequent calls. &lt;br/&gt;&lt;br/&gt; Any API service that implements paging provides the following input parameters:&lt;br/&gt; &amp;bull; \&quot;page\&quot;: the number of the page to be retrieved (starting with 1).&lt;br/&gt; &amp;bull; \&quot;perPage\&quot;: the number of entries within a page. The default and maximum value is stated in the documentation of the respective services.  A paged response contains an additional \&quot;paging\&quot; object with the following structure:  &lt;pre&gt; {   ...   ,   \&quot;paging\&quot;: {     \&quot;page\&quot;: 1,     \&quot;perPage\&quot;: 20,     \&quot;pageCount\&quot;: 234,     \&quot;totalCount\&quot;: 4662   } } &lt;/pre&gt;  &lt;h3&gt;&lt;strong&gt;Internationalization&lt;/strong&gt;&lt;/h3&gt; The finAPI services support internationalization which means you can define the language you prefer for API service responses. &lt;br/&gt;&lt;br/&gt; The following languages are available: German, English, Czech, Slovak. &lt;br/&gt;&lt;br/&gt; The preferred language can be defined by providing the official HTTP &lt;strong&gt;Accept-Language&lt;/strong&gt; header. For web form request issued in a web browser, the Accept-Language header is automatically set by the browser based on the browser&#39;s or operation system&#39;s language settings. For direct API calls, the Accept-Language header must be set explicity. &lt;br/&gt;&lt;br/&gt; finAPI reacts on the official iso language codes &amp;quot;de&amp;quot;, &amp;quot;en&amp;quot;, &amp;quot;cs&amp;quot; and &amp;quot;sk&amp;quot; for the named languages. Additional subtags supported by the Accept-Language header may be provided, e.g. &amp;quot;en-US&amp;quot;, but are ignored. &lt;br/&gt; If no Accept-Language header is given, German is used as the default language. &lt;br/&gt;&lt;br/&gt; Exceptions:&lt;br/&gt; &amp;bull; Bank login hints and login fields are only available in the language of the bank and not being translated.&lt;br/&gt; &amp;bull; Direct messages from the bank systems typically returned as BUSINESS errors will not be translated.&lt;br/&gt; &amp;bull; BUSINESS errors created by finAPI directly are available in German and English.&lt;br/&gt; &amp;bull; TECHNICAL errors messages meant for developers are mostly in English, but also may be translated.  &lt;h3&gt;&lt;strong&gt;Request IDs&lt;/strong&gt;&lt;/h3&gt; With any API call, you can pass a request ID via a header with name \&quot;X-REQUEST-ID\&quot;. The request ID can be an arbitrary string with up to 255 characters. Passing a longer string will result in an error. &lt;br/&gt;&lt;br/&gt; If you don&#39;t pass a request ID for a call, finAPI will generate a random ID internally. &lt;br/&gt;&lt;br/&gt; The request ID is always returned back in the response of a service, as a header with name \&quot;X-REQUEST-ID\&quot;. &lt;br/&gt;&lt;br/&gt; We highly recommend to always pass a (preferably unique) request ID, and include it into your client application logs whenever you make a request or receive a response (especially in the case of an error response). finAPI is also logging request IDs on its end. Having a request ID can help the finAPI support team to work more efficiently and solve tickets faster.  &lt;h3&gt;&lt;strong&gt;Overriding HTTP methods&lt;/strong&gt;&lt;/h3&gt; Some HTTP clients do not support the HTTP methods PATCH or DELETE. If you are using such a client in your application, you can use a POST request instead with a special HTTP header indicating the originally intended HTTP method. &lt;br/&gt;&lt;br/&gt; The header&#39;s name is &lt;strong&gt;X-HTTP-Method-Override&lt;/strong&gt;. Set its value to either &lt;strong&gt;PATCH&lt;/strong&gt; or &lt;strong&gt;DELETE&lt;/strong&gt;. POST Requests having this header set will be treated either as PATCH or DELETE by the finAPI servers. &lt;br/&gt;&lt;br/&gt; Example: &lt;br/&gt;&lt;br/&gt; &lt;strong&gt;X-HTTP-Method-Override: PATCH&lt;/strong&gt;&lt;br/&gt; POST /api/v1/label/51&lt;br/&gt; {\&quot;name\&quot;: \&quot;changed label\&quot;}&lt;br/&gt;&lt;br/&gt; will be interpreted by finAPI as:&lt;br/&gt;&lt;br/&gt; PATCH /api/v1/label/51&lt;br/&gt; {\&quot;name\&quot;: \&quot;changed label\&quot;}&lt;br/&gt;  &lt;h3&gt;&lt;strong&gt;User metadata&lt;/strong&gt;&lt;/h3&gt; With the migration to PSD2 APIs, a new term called \&quot;User metadata\&quot; (also known as \&quot;PSU metadata\&quot;) has been introduced to the API. This user metadata aims to inform the banking API if there was a real end-user behind an HTTP request or if the request was triggered by a system (e.g. by an automatic batch update). In the latter case, the bank may apply some restrictions such as limiting the number of HTTP requests for a single consent. Also, some operations may be forbidden entirely by the banking API. For example, some banks do not allow issuing a new consent without the end-user being involved. Therefore, the PSU metadata must always be provided for such operations. &lt;br/&gt;&lt;br/&gt; As finAPI does not have direct interaction with the end-user, it is the client application&#39;s responsibility to provide all the necessary information about the end-user. This must be done by sending additional headers with every request triggered on behalf of the end-user. &lt;br/&gt;&lt;br/&gt; At the moment, the following headers are supported by the API:&lt;br/&gt; &amp;bull; \&quot;PSU-IP-Address\&quot; - the IP address of the user&#39;s device.&lt;br/&gt; &amp;bull; \&quot;PSU-Device-OS\&quot; - the user&#39;s device and/or operating system identification.&lt;br/&gt; &amp;bull; \&quot;PSU-User-Agent\&quot; - the user&#39;s web browser or other client device identification. &lt;br/&gt;&lt;br/&gt; Web-form customers (or unlicensed customers) must send the PSU headers from their client application to finAPI. It will not take effect if web form is triggered for the workflow. &lt;br/&gt; In this case Values for the PSU-Device-OS and PSU-User-Agent headers are identified by the JS platform detection and the PSU-IP-Address is obtained from a public Cloudflare service: https://www.cloudflare.com/cdn-cgi/trace. &lt;br/&gt;&lt;br/&gt; But it is certainly necessary and obligatory to have the true PSU header data for API calls which don&#39;t trigger a web form (like \&quot;Update a bank connection\&quot;).  &lt;h3&gt;&lt;strong&gt;FAQ&lt;/strong&gt;&lt;/h3&gt; &lt;strong&gt;Is there a finAPI SDK?&lt;/strong&gt; &lt;br/&gt; Currently we do not offer a native SDK, but there is the option to generate a SDK for almost any target language via Swagger. Use the &#39;Download SDK&#39; button on this page for SDK generation. &lt;br/&gt; &lt;br/&gt; &lt;strong&gt;How can I enable finAPI&#39;s automatic batch update?&lt;/strong&gt; &lt;br/&gt; Currently there is no way to set up the batch update via the API. Please contact support@finapi.io for this. &lt;br/&gt; &lt;br/&gt; &lt;strong&gt;Why do I need to keep authorizing when calling services on this page?&lt;/strong&gt; &lt;br/&gt; This page is a \&quot;one-page-app\&quot;. Reloading the page resets the OAuth authorization context. There is generally no need to reload the page, so just don&#39;t do it and your authorization will persist. 

## Installation

If [available in Hex](https://hex.pm/docs/publish), the package can be installed
by adding `fin_api_access` to your list of dependencies in `mix.exs`:

```elixir
def deps do
  [{:fin_api_access, "~> 0.1.0"}]
end
```

Documentation can be generated with [ExDoc](https://github.com/elixir-lang/ex_doc)
and published on [HexDocs](https://hexdocs.pm). Once published, the docs can
be found at [https://hexdocs.pm/fin_api_access](https://hexdocs.pm/fin_api_access).
